<!DOCTYPE html>
<html lang="en" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
    <title>English Learner</title>

    <!-- Tailwind CDN (OK for demo; warning is normal) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

    <script>
      tailwind.config = { darkMode: "class" };
    </script>

    <style>
      /* ===== Must-have for screen navigation ===== */
      .screen, .category-selection { display: none; }
      .screen.active, .category-selection.active { display: flex; }

      /* Small UX */
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      button, a, .tap { -webkit-tap-highlight-color: transparent; }
      mark.hl { padding: 0 .12rem; border-radius: .25rem; }
    </style>
  </head>

  <body class="h-full bg-neutral-100 text-neutral-900 dark:bg-neutral-950 dark:text-neutral-50">
    <!-- App shell -->
    <div class="mx-auto h-full w-full max-w-[540px] overflow-hidden border border-neutral-200 bg-white shadow-[0_24px_80px_rgba(0,0,0,.22)] dark:border-white/10 dark:bg-neutral-900">
      <!-- ============ HOME ============ -->
      <section id="home" class="screen active h-full flex-col">
        <header class="sticky top-0 z-20 border-b border-neutral-200 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/70">
          <div class="flex items-center justify-between px-4 py-3">
            <div class="min-w-0">
              <div class="flex items-center gap-2">
                <span class="h-2.5 w-2.5 rounded-full bg-neutral-900 dark:bg-white"></span>
                <h1 class="truncate text-[15px] font-extrabold tracking-tight">English Learner</h1>
              </div>
              <p class="truncate text-xs text-neutral-500 dark:text-white/60">Premium black & white ‚Ä¢ fast & clean</p>
            </div>

            <div class="flex items-center gap-2">
              <button
                class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
                onclick="toggleTheme()"
                aria-label="Toggle theme"
                title="Theme"
              >
                <i class="fa-solid fa-moon hidden dark:inline"></i>
                <i class="fa-solid fa-sun inline dark:hidden"></i>
              </button>

              <button
                class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
                onclick="showScreen('settings')"
                aria-label="Settings"
                title="Settings"
              >
                <i class="fa-solid fa-gear"></i>
              </button>
            </div>
          </div>
        </header>

        <main class="flex-1 overflow-y-auto px-4 py-4">
          <div class="grid gap-3">
            <button
              class="group flex items-center gap-3 rounded-2xl border border-neutral-200 bg-white p-4 text-left shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-[0.99] dark:border-white/10 dark:bg-neutral-900"
              onclick="showCategorySelection('memorize')"
            >
              <div class="flex h-11 w-11 items-center justify-center rounded-2xl border border-neutral-200 bg-neutral-50 text-neutral-900 dark:border-white/10 dark:bg-white/5 dark:text-white">
                <i class="fa-solid fa-book-open"></i>
              </div>
              <div class="min-w-0">
                <div class="text-sm font-extrabold tracking-tight">Word Memorization</div>
                <div class="text-xs text-neutral-500 dark:text-white/60">Search ‚Ä¢ ‚≠ê Favorites ‚Ä¢ Pronunciation</div>
              </div>
              <div class="ml-auto text-neutral-400 dark:text-white/40">
                <i class="fa-solid fa-chevron-right"></i>
              </div>
            </button>

            <button
              class="group flex items-center gap-3 rounded-2xl border border-neutral-200 bg-white p-4 text-left shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-[0.99] dark:border-white/10 dark:bg-neutral-900"
              onclick="showCategorySelection('quiz')"
            >
              <div class="flex h-11 w-11 items-center justify-center rounded-2xl border border-neutral-200 bg-neutral-50 text-neutral-900 dark:border-white/10 dark:bg-white/5 dark:text-white">
                <i class="fa-solid fa-pen-to-square"></i>
              </div>
              <div class="min-w-0">
                <div class="text-sm font-extrabold tracking-tight">Practice Quiz</div>
                <div class="text-xs text-neutral-500 dark:text-white/60">4 options ‚Ä¢ instant feedback</div>
              </div>
              <div class="ml-auto text-neutral-400 dark:text-white/40">
                <i class="fa-solid fa-chevron-right"></i>
              </div>
            </button>

            <button
              class="group flex items-center gap-3 rounded-2xl border border-neutral-200 bg-white p-4 text-left shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-[0.99] dark:border-white/10 dark:bg-neutral-900"
              onclick="showCategorySelection('speaking')"
            >
              <div class="flex h-11 w-11 items-center justify-center rounded-2xl border border-neutral-200 bg-neutral-50 text-neutral-900 dark:border-white/10 dark:bg-white/5 dark:text-white">
                <i class="fa-solid fa-microphone"></i>
              </div>
              <div class="min-w-0">
                <div class="text-sm font-extrabold tracking-tight">Speaking Practice</div>
                <div class="text-xs text-neutral-500 dark:text-white/60">Mic ‚Ä¢ smart matching</div>
              </div>
              <div class="ml-auto text-neutral-400 dark:text-white/40">
                <i class="fa-solid fa-chevron-right"></i>
              </div>
            </button>

            <button
              class="group flex items-center gap-3 rounded-2xl border border-neutral-200 bg-white p-4 text-left shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-[0.99] dark:border-white/10 dark:bg-neutral-900"
              onclick="showScreen('settings')"
            >
              <div class="flex h-11 w-11 items-center justify-center rounded-2xl border border-neutral-200 bg-neutral-50 text-neutral-900 dark:border-white/10 dark:bg-white/5 dark:text-white">
                <i class="fa-solid fa-sliders"></i>
              </div>
              <div class="min-w-0">
                <div class="text-sm font-extrabold tracking-tight">Settings</div>
                <div class="text-xs text-neutral-500 dark:text-white/60">Theme ‚Ä¢ voice ‚Ä¢ data</div>
              </div>
              <div class="ml-auto text-neutral-400 dark:text-white/40">
                <i class="fa-solid fa-chevron-right"></i>
              </div>
            </button>
          </div>

          <div class="mt-5 rounded-2xl border border-neutral-200 bg-neutral-50 p-4 text-xs text-neutral-700 dark:border-white/10 dark:bg-white/5 dark:text-white/70">
            <div class="font-extrabold text-neutral-900 dark:text-white">Premium UX tips</div>
            <ul class="mt-2 list-disc space-y-1 pl-4">
              <li>Search english/uzbek/pron.</li>
              <li>‚≠ê favorites are saved on your phone.</li>
              <li>Dark mode is designed for comfort.</li>
            </ul>
          </div>
        </main>
      </section>

      <!-- ============ CATEGORY SELECTION ============ -->
      <section id="categorySelection" class="category-selection h-full flex-col">
        <header class="sticky top-0 z-20 border-b border-neutral-200 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/70">
          <div class="flex items-center justify-between px-4 py-3">
            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="showScreen('home')"
              aria-label="Back"
              title="Back"
            >
              <i class="fa-solid fa-arrow-left"></i>
            </button>

            <div class="min-w-0 text-center">
              <div id="categoryTitle" class="truncate text-sm font-extrabold">Select Category</div>
              <div class="text-xs text-neutral-500 dark:text-white/60">Pick a category to continue</div>
            </div>

            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="toggleTheme()"
              aria-label="Toggle theme"
              title="Theme"
            >
              <i class="fa-solid fa-moon hidden dark:inline"></i>
              <i class="fa-solid fa-sun inline dark:hidden"></i>
            </button>
          </div>
        </header>

        <div class="flex-1 overflow-y-auto px-4 py-4">
          <div id="categoryGrid" class="grid grid-cols-2 gap-3"></div>
        </div>
      </section>

      <!-- ============ MEMORIZE ============ -->
      <section id="memorize" class="screen h-full flex-col">
        <header class="sticky top-0 z-20 border-b border-neutral-200 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/70">
          <div class="flex items-center justify-between px-4 py-3">
            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="showScreen('home')"
              aria-label="Back"
              title="Back"
            >
              <i class="fa-solid fa-arrow-left"></i>
            </button>

            <div class="min-w-0 text-center">
              <div class="truncate text-sm font-extrabold">Word Memorization</div>
              <div class="text-xs text-neutral-500 dark:text-white/60">Search ‚Ä¢ ‚≠ê ‚Ä¢ üîä</div>
            </div>

            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="toggleTheme()"
              aria-label="Toggle theme"
              title="Theme"
            >
              <i class="fa-solid fa-moon hidden dark:inline"></i>
              <i class="fa-solid fa-sun inline dark:hidden"></i>
            </button>
          </div>
        </header>

        <div class="flex-1 overflow-y-auto px-4 py-4">
          <!-- Search -->
          <div class="rounded-2xl border border-neutral-200 bg-white p-3 shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900">
            <div class="flex items-center gap-2">
              <div class="flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-neutral-50 dark:border-white/10 dark:bg-white/5">
                <i class="fa-solid fa-magnifying-glass"></i>
              </div>

              <input
                id="searchInput"
                class="w-full rounded-2xl border border-neutral-200 bg-white px-3 py-3 text-sm font-bold outline-none focus:ring-4 focus:ring-neutral-200 dark:border-white/10 dark:bg-neutral-900 dark:focus:ring-white/10"
                placeholder="Search (english / uzbek / pron)..."
                oninput="onSearchChange(this.value)"
                autocomplete="off"
              />

              <button
                class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white transition active:scale-95 dark:border-white/10 dark:bg-neutral-900"
                onclick="clearSearch()"
                aria-label="Clear"
                title="Clear"
              >
                <i class="fa-solid fa-xmark"></i>
              </button>
            </div>
          </div>

          <!-- Voice -->
          <div class="mt-3 rounded-2xl border border-neutral-200 bg-white p-4 shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900">
            <div class="mb-3 flex items-center gap-2 text-sm font-extrabold">
              <i class="fa-solid fa-volume-high"></i>
              Voice
            </div>
            <div class="flex flex-wrap gap-2" id="voiceButtonsMemorize"></div>
          </div>

          <!-- Category chips -->
          <div class="mt-3 flex gap-2 overflow-x-auto pb-2 no-scrollbar" id="categoryFilter"></div>

          <!-- Counter -->
          <div id="wordCounter" class="mt-2 inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-3 py-1.5 text-xs font-extrabold text-neutral-700 dark:border-white/10 dark:bg-neutral-900 dark:text-white/80"></div>

          <!-- List -->
          <div id="wordList" class="mt-3 space-y-3"></div>
        </div>
      </section>

      <!-- ============ QUIZ ============ -->
      <section id="quiz" class="screen h-full flex-col">
        <header class="sticky top-0 z-20 border-b border-neutral-200 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/70">
          <div class="flex items-center justify-between px-4 py-3">
            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="showScreen('home')"
              aria-label="Back"
              title="Back"
            >
              <i class="fa-solid fa-arrow-left"></i>
            </button>

            <div class="min-w-0 text-center">
              <div class="truncate text-sm font-extrabold">Practice Quiz</div>
              <div class="text-xs text-neutral-500 dark:text-white/60">Category-based</div>
            </div>

            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="toggleTheme()"
              aria-label="Toggle theme"
              title="Theme"
            >
              <i class="fa-solid fa-moon hidden dark:inline"></i>
              <i class="fa-solid fa-sun inline dark:hidden"></i>
            </button>
          </div>
        </header>

        <div class="border-b border-neutral-200 bg-white px-4 py-3 dark:border-white/10 dark:bg-neutral-900">
          <div class="flex items-center justify-between text-xs font-extrabold">
            <div>Score: <span id="scoreValue">0</span> / <span id="totalValue">0</span></div>
            <div class="text-neutral-500 dark:text-white/60">Goal: 10</div>
          </div>
          <div class="mt-2 h-1.5 w-full overflow-hidden rounded-full bg-neutral-200 dark:bg-white/10">
            <div id="quizProgress" class="h-full w-0 rounded-full bg-neutral-900 transition-all dark:bg-white"></div>
          </div>
        </div>

        <div class="flex-1 overflow-y-auto px-4 py-4">
          <div id="questionText" class="rounded-2xl border border-neutral-200 bg-white p-5 text-center text-2xl font-extrabold tracking-tight shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900"></div>

          <div id="optionsContainer" class="mt-3 grid gap-2"></div>

          <div id="feedback" class="mt-3 min-h-[54px] rounded-2xl border border-neutral-200 bg-white p-3 text-center text-base font-extrabold text-neutral-700 shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900 dark:text-white/80"></div>

          <button
            id="nextButton"
            class="mt-4 w-full rounded-2xl bg-neutral-900 px-4 py-4 text-sm font-extrabold text-white shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-[0.99] dark:bg-white dark:text-neutral-900"
            onclick="nextQuestion()"
          >
            Next ‚Üí
          </button>
        </div>
      </section>

      <!-- ============ SPEAKING ============ -->
      <section id="speaking" class="screen h-full flex-col">
        <header class="sticky top-0 z-20 border-b border-neutral-200 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/70">
          <div class="flex items-center justify-between px-4 py-3">
            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="showScreen('home')"
              aria-label="Back"
              title="Back"
            >
              <i class="fa-solid fa-arrow-left"></i>
            </button>

            <div class="min-w-0 text-center">
              <div class="truncate text-sm font-extrabold">Speaking Practice</div>
              <div class="text-xs text-neutral-500 dark:text-white/60">Mic ‚Ä¢ hint ‚Ä¢ smart check</div>
            </div>

            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="toggleTheme()"
              aria-label="Toggle theme"
              title="Theme"
            >
              <i class="fa-solid fa-moon hidden dark:inline"></i>
              <i class="fa-solid fa-sun inline dark:hidden"></i>
            </button>
          </div>
        </header>

        <div class="flex-1 overflow-y-auto px-4 py-6">
          <div class="mx-auto flex max-w-md flex-col items-center gap-4">
            <div id="uzWord" class="w-full rounded-2xl border border-neutral-200 bg-white p-6 text-center text-2xl font-extrabold tracking-tight shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900">
              Tap the microphone to start
            </div>

            <div id="speakingResult" class="w-full min-h-[54px] rounded-2xl border border-neutral-200 bg-white p-3 text-center text-base font-extrabold text-neutral-700 shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900 dark:text-white/80"></div>

            <div class="flex items-center gap-3">
              <button
                class="inline-flex h-14 w-14 items-center justify-center rounded-full border border-neutral-200 bg-white text-neutral-900 shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
                onclick="giveHint()"
                aria-label="Hint"
                title="Hint"
              >
                <i class="fa-solid fa-volume-high"></i>
              </button>

              <button
                id="micButton"
                class="inline-flex h-20 w-20 items-center justify-center rounded-full bg-neutral-900 text-2xl text-white shadow-[0_24px_80px_rgba(0,0,0,.22)] transition active:scale-95 dark:bg-white dark:text-neutral-900"
                aria-label="Microphone"
                title="Microphone"
              >
                <i class="fa-solid fa-microphone"></i>
              </button>
            </div>

            <button
              id="nextWordButton"
              class="hidden w-full rounded-2xl bg-neutral-900 px-4 py-4 text-sm font-extrabold text-white shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-[0.99] dark:bg-white dark:text-neutral-900"
              onclick="nextSpeakingWord()"
            >
              Next Word ‚Üí
            </button>

            <div class="w-full rounded-2xl border border-neutral-200 bg-neutral-50 p-4 text-xs text-neutral-700 dark:border-white/10 dark:bg-white/5 dark:text-white/70">
              <div class="font-extrabold text-neutral-900 dark:text-white">Note</div>
              Speech recognition works best in Chrome/Edge on Android.
            </div>
          </div>
        </div>
      </section>

      <!-- ============ SETTINGS ============ -->
      <section id="settings" class="screen h-full flex-col">
        <header class="sticky top-0 z-20 border-b border-neutral-200 bg-white/80 backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/70">
          <div class="flex items-center justify-between px-4 py-3">
            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="showScreen('home')"
              aria-label="Back"
              title="Back"
            >
              <i class="fa-solid fa-arrow-left"></i>
            </button>

            <div class="min-w-0 text-center">
              <div class="truncate text-sm font-extrabold">Settings</div>
              <div class="text-xs text-neutral-500 dark:text-white/60">Premium controls</div>
            </div>

            <button
              class="inline-flex h-10 w-10 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
              onclick="toggleTheme()"
              aria-label="Toggle theme"
              title="Theme"
            >
              <i class="fa-solid fa-moon hidden dark:inline"></i>
              <i class="fa-solid fa-sun inline dark:hidden"></i>
            </button>
          </div>
        </header>

        <div class="flex-1 overflow-y-auto px-4 py-4 space-y-3">
          <div class="rounded-2xl border border-neutral-200 bg-white p-4 shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900">
            <div class="mb-3 flex items-center gap-2 text-sm font-extrabold">
              <i class="fa-solid fa-circle-half-stroke"></i> Theme
            </div>
            <div class="flex gap-2">
              <button class="w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm font-extrabold transition active:scale-[0.99] dark:border-white/10 dark:bg-neutral-900" onclick="setTheme('light')">
                Light
              </button>
              <button class="w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm font-extrabold transition active:scale-[0.99] dark:border-white/10 dark:bg-neutral-900" onclick="setTheme('dark')">
                Dark
              </button>
            </div>
            <p class="mt-2 text-xs text-neutral-500 dark:text-white/60">Theme is saved automatically.</p>
          </div>

          <div class="rounded-2xl border border-neutral-200 bg-white p-4 shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900">
            <div class="mb-3 flex items-center gap-2 text-sm font-extrabold">
              <i class="fa-solid fa-volume-high"></i> Voice
            </div>
            <div class="flex flex-wrap gap-2" id="voiceButtonsSettings"></div>
            <p class="mt-2 text-xs text-neutral-500 dark:text-white/60">Voice affects üîä pronunciation everywhere.</p>
          </div>

          <div class="rounded-2xl border border-neutral-200 bg-white p-4 shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900">
            <div class="mb-2 flex items-center gap-2 text-sm font-extrabold">
              <i class="fa-solid fa-database"></i> Data
            </div>
            <div class="grid gap-2">
              <button class="w-full rounded-2xl bg-neutral-900 px-4 py-3 text-sm font-extrabold text-white transition active:scale-[0.99] dark:bg-white dark:text-neutral-900" onclick="exportFavorites()">
                Export ‚≠ê Favorites
              </button>
              <button class="w-full rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-sm font-extrabold transition active:scale-[0.99] dark:border-white/10 dark:bg-neutral-900" onclick="clearFavorites()">
                Clear ‚≠ê Favorites
              </button>
            </div>
            <p class="mt-2 text-xs text-neutral-500 dark:text-white/60">Favorites are stored in LocalStorage.</p>
          </div>

          <div class="rounded-2xl border border-neutral-200 bg-neutral-50 p-4 text-xs text-neutral-700 dark:border-white/10 dark:bg-white/5 dark:text-white/70">
            <div class="font-extrabold text-neutral-900 dark:text-white">Troubleshooting</div>
            If microphone doesn‚Äôt work ‚Üí allow mic permission, use Chrome/Edge.
          </div>
        </div>
      </section>
    </div>

    <script>
      /* =========================
         WORD DATABASE (your words)
      ========================== */
      const words = [
        // Adverbs
        { en: "always", pron: "Àà…îÀêlwe…™z", uz: "har doim", category: "adverbs" },
        { en: "usually", pron: "ÀàjuÀê íu…ôli", uz: "odatda", category: "adverbs" },
        { en: "sometimes", pron: "Ààs åmta…™mz", uz: "ba'zan", category: "adverbs" },
        { en: "never", pron: "Àànev…ôr", uz: "hech qachon", category: "adverbs" },

        // Daily routine
        { en: "get up", pron: "get  åp", uz: "uyg'onmoq, turmoq", category: "daily routine" },
        { en: "have a shower", pron: "h√¶v …ô Àà Éa ä…ôr", uz: "dush qilmoq", category: "daily routine" },

        // Add more here...

        
        {en:"have breakfast", pron:"h√¶v Ààbrekf…ôst", uz:"nonushta qilmoq", category:"daily routine"},
        {en:"go to work", pron:"go ä tu w…úÀêrk", uz:"ishga bormoq", category:"daily routine"},
        {en:"go to school", pron:"go ä tu skuÀêl", uz:"maktabga bormoq", category:"daily routine"},
        {en:"have lunch", pron:"h√¶v l ånt É", uz:"tushlik qilmoq", category:"daily routine"},
        {en:"have dinner", pron:"h√¶v Ààd…™n…ôr", uz:"kechki ovqat qilmoq", category:"daily routine"},
        {en:"go to bed", pron:"go ä tu bed", uz:"uxlashga yotmoq", category:"daily routine"},
        {en:"do housework", pron:"duÀê Ààha äsw…úÀêrk", uz:"uy ishlarini qilmoq", category:"daily routine"},
        {en:"watch TV", pron:"w…ít É ÀåtiÀêÀàviÀê", uz:"televizor ko'rmoq", category:"daily routine"},
        {en:"read a newspaper", pron:"riÀêd …ô ÀànjuÀêzÀåpe…™p…ôr", uz:"gazeta o'qimoq", category:"daily routine"},
        {en:"finish work", pron:"Ààf…™n…™ É w…úÀêrk", uz:"ishni tugatmoq", category:"daily routine"},
        {en:"go home", pron:"go ä ho äm", uz:"uyga bormoq", category:"daily routine"},
        {en:"go shopping", pron:"go ä Àà É…íp…™≈ã", uz:"do'konga bormoq / xarid qilmoq", category:"daily routine"},
        {en:"have a bath", pron:"h√¶v …ô b…ëÀêŒ∏", uz:"vanna qilmoq", category:"daily routine"},
        {en:"make dinner", pron:"me…™k Ààd…™n…ôr", uz:"kechki ovqat tayyorlamoq", category:"daily routine"},

        // --- Time words (Vaqt so'zlari) ---
        {en:"then", pron:"√∞en", uz:"keyin", category:"time"},
        {en:"after", pron:"Àà√¶ft…ôr", uz:"‚Ä¶dan keyin", category:"time"},
        {en:"before", pron:"b…™Ààf…îÀêr", uz:"‚Ä¶dan oldin", category:"time"},
        {en:"in the morning", pron:"…™n √∞…ô Ààm…îÀêrn…™≈ã", uz:"ertalab", category:"time"},
        {en:"in the afternoon", pron:"…™n √∞i Àå√¶ft…ôrÀànuÀên", uz:"tushdan keyin", category:"time"},
        {en:"in the evening", pron:"…™n √∞i ÀàiÀêvn…™≈ã", uz:"kechqurun", category:"time"},
        {en:"at the weekend", pron:"√¶t √∞…ô ÀåwiÀêkÀàend", uz:"hafta oxirida", category:"time"},
        {en:"until", pron:"…ônÀàt…™l", uz:"‚Ä¶gacha", category:"time"},
        {en:"at about", pron:"√¶t …ôÀàba ät", uz:"taxminan", category:"time"},

        // --- Lesson & reading vocabulary (Dars va o'qish lug'ati) ---
        {en:"hurry", pron:"Ààh åri", uz:"shoshilmoq", category:"verbs"},
        {en:"towel", pron:"Ààta ä…ôl", uz:"sochiq", category:"objects"},
        {en:"floor", pron:"fl…îÀêr", uz:"pol", category:"objects"},
        {en:"clothes", pron:"klo ä√∞z", uz:"kiyimlar", category:"objects"},
        {en:"steak", pron:"ste…™k", uz:"bifshteks, go'sht bo'lagi", category:"food"},
        {en:"ballet", pron:"b√¶Ààle…™", uz:"balet", category:"arts"},
        {en:"ballet dancer", pron:"Ààb√¶le…™ Àåd√¶ns…ôr", uz:"balet raqqosi", category:"arts"},
        {en:"sleep", pron:"sliÀêp", uz:"uyqu, uxlash", category:"verbs"},
        {en:"practise", pron:"Ààpr√¶kt…™s", uz:"mashq qilmoq", category:"verbs"},
        {en:"hotel", pron:"ho äÀàtel", uz:"mehmonxona", category:"places"},
        {en:"hungry", pron:"Ààh å≈ã…°ri", uz:"och", category:"adjectives"},

        // --- /j/ sound (Talaffuz so'zlari) ---
        {en:"yacht", pron:"j…ít", uz:"yaxta", category:"objects"},
        {en:"you", pron:"juÀê", uz:"sen", category:"pronouns"},
        {en:"your", pron:"j…îÀêr", uz:"sening", category:"pronouns"},
        {en:"yes", pron:"jes", uz:"ha", category:"interjections"},
        {en:"music", pron:"ÀàmjuÀêz…™k", uz:"musiqa", category:"arts"},
        {en:"beautiful", pron:"ÀàbjuÀêt…™f…ôl", uz:"chiroyli", category:"adjectives"},
        {en:"student", pron:"ÀàstjuÀêd…ônt", uz:"talaba", category:"people"},

        // --- Family Members (Oila A'zolari) ---
        {en:"mother", pron:"Ààm å√∞…ôr", uz:"ona", category:"family members"},
        {en:"mom", pron:"m…ím", uz:"oyi", category:"family members"},
        {en:"father", pron:"Ààf…ëÀê√∞…ôr", uz:"ota", category:"family members"},
        {en:"mother-in-law", pron:"Ààm å√∞…ôr …™n l…îÀê", uz:"qaynona", category:"family members"},
        {en:"father-in-law", pron:"Ààf…ëÀê√∞…ôr …™n l…îÀê", uz:"qaynota", category:"family members"},
        {en:"partner", pron:"Ààp…ëÀêrtn…ôr", uz:"juft / sherik", category:"family members"},
        {en:"dad", pron:"d√¶d", uz:"dada", category:"family members"},
        {en:"parent", pron:"Ààpe…ôr…ônt", uz:"ota-ona", category:"family members"},
        {en:"children", pron:"Ààt É…™ldr…ôn", uz:"bolalar", category:"family members"},
        {en:"uncle", pron:"Àà å≈ãkl", uz:"tog'a / amaki", category:"family members"},
        {en:"niece", pron:"niÀês", uz:"jiyan qiz", category:"family members"},
        {en:"nephew", pron:"ÀànefjuÀê", uz:"jiyan o'g'il", category:"family members"},
        {en:"grandson", pron:"Àà…°r√¶ns ån", uz:"nabira o'g'il", category:"family members"},
        {en:"granddaughter", pron:"Àà…°r√¶nd…îÀêt…ôr", uz:"nabira qiz", category:"family members"},
        {en:"grandchild", pron:"Àà…°r√¶nt Éa…™ld", uz:"nabira", category:"family members"},
        {en:"sister-in-law", pron:"Ààs…™st…ôr …™n l…îÀê", uz:"qaynsingil / kelin", category:"family members"},
        {en:"brother-in-law", pron:"Ààbr å√∞…ôr …™n l…îÀê", uz:"qaynaka / quda", category:"family members"},
        {en:"stepmother", pron:"ÀàstepÀåm å√∞…ôr", uz:"o'gay ona", category:"family members"},
        {en:"stepfather", pron:"ÀàstepÀåf…ëÀê√∞…ôr", uz:"o'gay ota", category:"family members"},
        {en:"aunt", pron:"…ëÀênt", uz:"xola / amma", category:"family members"},
        {en:"cousin", pron:"Ààk åzn", uz:"jiyan / qarindosh", category:"family members"},
        {en:"husband", pron:"Ààh åzb…ônd", uz:"er", category:"family members"},
        {en:"wife", pron:"wa…™f", uz:"xotin / turmush o'rtog'i", category:"family members"},
        {en:"ex", pron:"eks", uz:"sobiq turmush o'rtog'i", category:"family members"},
        {en:"son", pron:"s ån", uz:"o'g'il", category:"family members"},
        {en:"daughter", pron:"Ààd…îÀêt…ôr", uz:"qiz", category:"family members"},
        {en:"sister", pron:"Ààs…™st…ôr", uz:"opa-singil", category:"family members"},
        {en:"brother", pron:"Ààbr å√∞…ôr", uz:"aka-uka", category:"family members"},
        {en:"grandmother", pron:"Àà…°r√¶nÀåm å√∞…ôr", uz:"buvi", category:"family members"},
        {en:"grandfather", pron:"Àà…°r√¶nÀåf…ëÀê√∞…ôr", uz:"bobo", category:"family members"},
        {en:"grandparent", pron:"Àà…°r√¶nÀåpe…ôr…ônt", uz:"keksalar / bobo-buvi", category:"family members"},
        
        // --- Question Words (So'roq So'zlari) ---
       
  {en:"what", pron:"", uz:"Nima? / Qanday?", category:"question words"},
  {en:"What is your name?", pron:"", uz:"Isming nima?", category:"question words"},
  {en:"What do you want?", pron:"", uz:"Nimani xohlaysan?", category:"question words"},

  {en:"who", pron:"", uz:"Kim?", category:"question words"},
  {en:"Who is he?", pron:"", uz:"U kim?", category:"question words"},
  {en:"Who called you?", pron:"", uz:"Senga kim qo‚Äòng‚Äòiroq qildi?", category:"question words"},

  {en:"where", pron:"", uz:"Qayerda? / Qaerga?", category:"question words"},
  {en:"Where do you live?", pron:"", uz:"Qayerda yashaysan?", category:"question words"},
  {en:"Where are they going?", pron:"", uz:"Ular qayerga ketishyapti?", category:"question words"},

  {en:"when", pron:"", uz:"Qachon?", category:"question words"},
  {en:"When is the meeting?", pron:"", uz:"Uchrashuv qachon?", category:"question words"},
  {en:"When did you arrive?", pron:"", uz:"Qachon kelding?", category:"question words"},

  {en:"why", pron:"", uz:"Nima uchun? / Nega?", category:"question words"},
  {en:"Why are you late?", pron:"", uz:"Nega kech kelding?", category:"question words"},
  {en:"Why does she cry?", pron:"", uz:"U nima uchun yig‚Äòlayapti?", category:"question words"},

  {en:"which", pron:"", uz:"Qaysi?", category:"question words"},
  {en:"Which book do you want?", pron:"", uz:"Qaysi kitobni xohlaysan?", category:"question words"},
  {en:"Which color is better?", pron:"", uz:"Qaysi rang yaxshiroq?", category:"question words"},

  {en:"whose", pron:"", uz:"Kimniki?", category:"question words"},
  {en:"Whose pen is this?", pron:"", uz:"Bu kimning ruchkasi?", category:"question words"},
  {en:"Whose car is outside?", pron:"", uz:"Tashqaridagi mashina kimniki?", category:"question words"},

  {en:"whom", pron:"", uz:"Kimni? / Kimga?", category:"question words"},
  {en:"Whom did you see?", pron:"", uz:"Kimni ko‚Äòrding?", category:"question words"},
  {en:"Whom are you talking to?", pron:"", uz:"Kim bilan gaplashyapsan?", category:"question words"},

  {en:"how", pron:"", uz:"Qanday? / Qanchalik?", category:"question words"},
  {en:"How are you?", pron:"", uz:"Qalaysiz?", category:"question words"},
  {en:"How does it work?", pron:"", uz:"Bu qanday ishlaydi?", category:"question words"},


  // --- Imperative Sentences (Buyruq Gaplari) ---
  {en:"Come here.", pron:"", uz:"Bu yerga kel.", category:"imperative"},
  {en:"Sit down.", pron:"", uz:"O‚Äòtir.", category:"imperative"},
  {en:"Stand up.", pron:"", uz:"Tur.", category:"imperative"},
  {en:"Open the door.", pron:"", uz:"Eshikni och.", category:"imperative"},
  {en:"Close your book.", pron:"", uz:"Kitobingni yop.", category:"imperative"},
  {en:"Listen to me.", pron:"", uz:"Meni tingla.", category:"imperative"},
  {en:"Don‚Äôt talk.", pron:"", uz:"Gapirma.", category:"imperative"},
  {en:"Don‚Äôt be late.", pron:"", uz:"Kechikma.", category:"imperative"},
  {en:"Look at the board.", pron:"", uz:"Doskaga qarang.", category:"imperative"},
  {en:"Be quiet.", pron:"", uz:"Jim bo‚Äòl.", category:"imperative"},
  {en:"Write your name.", pron:"", uz:"Ismingni yoz.", category:"imperative"},
  {en:"Turn off the light.", pron:"", uz:"Chiroqni o‚Äòchir.", category:"imperative"},
  {en:"Wait for me.", pron:"", uz:"Meni kut.", category:"imperative"},
  {en:"Don‚Äôt worry.", pron:"", uz:"Xavotir olma.", category:"imperative"},
  {en:"Help me.", pron:"", uz:"Menga yordam ber.", category:"imperative"},


// 4-dars


  {en:"drive", pron:"", uz:"haydamoq", category:"4-dars"},
  {en:"driving test", pron:"", uz:"haydovchilik testi", category:"4-dars"},
  {en:"theory exam", pron:"", uz:"nazariy imtihon", category:"4-dars"},
  {en:"practical test", pron:"", uz:"amaliy test", category:"4-dars"},
  {en:"instructor", pron:"", uz:"o‚Äòrgatuvchi", category:"4-dars"},
  {en:"examiner", pron:"", uz:"imtihon oluvchi", category:"4-dars"},
  {en:"lesson", pron:"", uz:"mashg‚Äòulot, dars", category:"4-dars"},
  {en:"book (a lesson)", pron:"", uz:"darsga yozilmoq", category:"4-dars"},
  {en:"come", pron:"", uz:"kelmoq", category:"4-dars"},
  {en:"listen", pron:"", uz:"tinglamoq", category:"4-dars"},
  {en:"nervous", pron:"", uz:"hayajonlangan", category:"4-dars"},
  {en:"answer", pron:"", uz:"javob bermoq", category:"4-dars"},
  {en:"question", pron:"", uz:"savol", category:"4-dars"},
  {en:"start the car", pron:"", uz:"mashinani ishga tushirmoq", category:"4-dars"},
  {en:"stop on the motorway", pron:"", uz:"trassada to‚Äòxtamoq", category:"4-dars"},
  {en:"no parking sign", pron:"", uz:"to‚Äòxtash taqiqlangan belgisi", category:"4-dars"},
  {en:"traffic lights", pron:"", uz:"svetofor", category:"4-dars"},
  {en:"motorway", pron:"", uz:"katta yo‚Äòl/trassa", category:"4-dars"},
  {en:"early", pron:"", uz:"erta", category:"4-dars"},
  {en:"late", pron:"", uz:"kech", category:"4-dars"},


// 5-dars
{en:"camping", pron:"", uz:"lagerga chiqish, chodir qurib dam olish", category:"5-dars"},
  {en:"buying clothes", pron:"", uz:"kiyim xarid qilish", category:"5-dars"},
  {en:"cooking", pron:"", uz:"ovqat pishirish", category:"5-dars"},
  {en:"cycling", pron:"", uz:"velosiped haydash", category:"5-dars"},
  {en:"flying", pron:"", uz:"uchish (samolyotda)", category:"5-dars"},
  {en:"going to the cinema", pron:"", uz:"kinoga borish", category:"5-dars"},
  {en:"reading", pron:"", uz:"o‚Äòqish", category:"5-dars"},
  {en:"running", pron:"", uz:"yugurish", category:"5-dars"},
  {en:"swimming", pron:"", uz:"suzish", category:"5-dars"},
  {en:"painting", pron:"", uz:"rasm chizish / bo‚Äòyash", category:"5-dars"},
  {en:"travelling", pron:"", uz:"sayohat qilish", category:"5-dars"},
  {en:"watching DVDs", pron:"", uz:"DVD ko‚Äòrish (kino tomosha qilish)", category:"5-dars"},
  {en:"hiking", pron:"", uz:"tog‚Äòlarda sayr qilish", category:"5-dars"},
  {en:"dancing", pron:"", uz:"raqsga tushish", category:"5-dars"},
  {en:"fishing", pron:"", uz:"baliq tutish", category:"5-dars"},
  {en:"gardening", pron:"", uz:"bog‚Äòdorchilik qilish", category:"5-dars"},
  {en:"playing the guitar", pron:"", uz:"gitara chalish", category:"5-dars"},
  {en:"playing football", pron:"", uz:"futbol o‚Äòynash", category:"5-dars"},
  {en:"shopping", pron:"", uz:"xarid qilish", category:"5-dars"},
  {en:"listening to music", pron:"", uz:"musiqa tinglash", category:"5-dars"},
  {en:"drawing", pron:"", uz:"chizmachilik", category:"5-dars"},
  {en:"playing video games", pron:"", uz:"video o‚Äòyin o‚Äòynash", category:"5-dars"},
  {en:"skiing", pron:"", uz:"chang‚Äòida uchish", category:"5-dars"},
  {en:"surfing the internet", pron:"", uz:"internetda sayr qilish", category:"5-dars"},
  {en:"taking photos", pron:"", uz:"suratga olish", category:"5-dars"},
  {en:"yoga", pron:"", uz:"yoga bilan shug‚Äòullanish", category:"5-dars"},
  {en:"baking", pron:"", uz:"pishiriq tayyorlash", category:"5-dars"},



  
  { en: "go somewhere", pron: "gou s åmwer", uz: "biror joyga bormoq", category: "6-dars" },
  { en: "wait for someone", pron: "weit for s åmw ån", uz: "kimnidir kutmoq", category: "6-dars" },
  { en: "talk on the phone", pron: "tok on √∞…ô foun", uz: "telefonda gaplashmoq", category: "6-dars" },
  { en: "work on a project", pron: "w…úrk on …ô prod íekt", uz: "loyiha ustida ishlamoq", category: "6-dars" },
  { en: "study for an exam", pron: "st ådi for …ôn igz√¶m", uz: "imtihonga tayyorlanmoq", category: "6-dars" },
  { en: "prepare dinner", pron: "pripeer din…ôr", uz: "ovqat tayyorlamoq", category: "6-dars" },
  { en: "look for a job", pron: "luk for …ô d íob", uz: "ish qidirmoq", category: "6-dars" },
  { en: "learn a new skill", pron: "l…úrn …ô nyu skil", uz: "yangi ko‚Äònikma o‚Äòrganmoq", category: "6-dars" },
  { en: "clean the house", pron: "klin √∞…ô haus", uz: "uy tozalamoq", category: "6-dars" },
  { en: "watch a video", pron: "woch …ô video", uz: "video tomosha qilmoq", category: "6-dars" },
  { en: "listen to music", pron: "lisn tu myuzik", uz: "musiqa tinglamoq", category: "6-dars" },
  { en: "wait in line", pron: "weit in lain", uz: "navbatda kutmoq", category: "6-dars" },
  { en: "check messages", pron: "chek mesijiz", uz: "xabarlarni tekshirmoq", category: "6-dars" },
  { en: "plan a trip", pron: "plen …ô trip", uz: "sayohat rejalamoq", category: "6-dars" },
  { en: "help a friend", pron: "help …ô frend", uz: "do‚Äòstga yordam bermoq", category: "6-dars" },
  { en: "fix a problem", pron: "fiks …ô problem", uz: "muammoni tuzatmoq", category: "6-dars" },
  { en: "carry bags", pron: "keri begz", uz: "sumka ko‚Äòtarmoq", category: "6-dars" },
  { en: "have a meeting", pron: "hev …ô miting", uz: "yig‚Äòilish qilmoq", category: "6-dars" },
  { en: "talk about plans", pron: "tok …ôbaut pl√¶nz", uz: "rejalar haqida gaplashmoq", category: "6-dars" },
  { en: "finish work", pron: "finish w…úrk", uz: "ishni tugatmoq", category: "6-dars" }

,
  { en: "T-shirt", pron: "", uz: "futbolka", category: "7-dars" },
  { en: "Shirt", pron: "", uz: "ko‚Äòylak", category: "7-dars" },
  { en: "Blouse", pron: "", uz: "ayollar ko‚Äòylagi", category: "7-dars" },
  { en: "Hoodie", pron: "", uz: "kapyushonli sviter", category: "7-dars" },
  { en: "Sweater", pron: "", uz: "sviter", category: "7-dars" },
  { en: "Jacket", pron: "", uz: "kurtka", category: "7-dars" },
  { en: "Coat", pron: "", uz: "palto", category: "7-dars" },
  { en: "Vest", pron: "", uz: "nimcha", category: "7-dars" },
  { en: "Cardigan", pron: "", uz: "kardigan", category: "7-dars" },
  { en: "Pants / Trousers", pron: "", uz: "shim", category: "7-dars" },
  { en: "Jeans", pron: "", uz: "jinsi shim", category: "7-dars" },
  { en: "Shorts", pron: "", uz: "kalta shim", category: "7-dars" },
  { en: "Skirt", pron: "", uz: "yubka", category: "7-dars" },
  { en: "Leggings", pron: "", uz: "yopishqoq shim", category: "7-dars" },
  { en: "Dress", pron: "", uz: "ko‚Äòylak", category: "7-dars" },
  { en: "Uniform", pron: "", uz: "forma", category: "7-dars" },
  { en: "School uniform", pron: "", uz: "maktab formasi", category: "7-dars" },
  { en: "Suit", pron: "", uz: "kostyum", category: "7-dars" },
  { en: "Hat / Cap", pron: "", uz: "bosh kiyim", category: "7-dars" },
  { en: "Scarf", pron: "", uz: "sharf", category: "7-dars" },
  { en: "Gloves", pron: "", uz: "qo‚Äòlqop", category: "7-dars" },
  { en: "Belt", pron: "", uz: "kamar", category: "7-dars" },

// No'to'g'ri fellar

{ en: "be-was/were-been", pron: "", uz: "bo‚Äòlmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "beat-beat-beaten", pron: "", uz: "urmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "become-became-become", pron: "", uz: "bo‚Äòlmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "begin-began-begun", pron: "", uz: "boshlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "bend-bent-bent", pron: "", uz: "egmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "bet-bet-bet", pron: "", uz: "garov o‚Äòynamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "bite-bit-bitten", pron: "", uz: "tishlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "blow-blew-blown", pron: "", uz: "esmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "break-broke-broken", pron: "", uz: "sindirmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "bring-brought-brought", pron: "", uz: "olib kelmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "broadcast-broadcast-broadcast", pron: "", uz: "efirga uzatmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "build-built-built", pron: "", uz: "qurmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "burst-burst-burst", pron: "", uz: "portlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "buy-bought-bought", pron: "", uz: "sotib olmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "catch-caught-caught", pron: "", uz: "ushlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "choose-chose-chosen", pron: "", uz: "tanlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "come-came-come", pron: "", uz: "kelmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "cost-cost-cost", pron: "", uz: "narxi turmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "creep-crept-crept", pron: "", uz: "sudralmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "cut-cut-cut", pron: "", uz: "kesmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "deal-dealt-dealt", pron: "", uz: "hal qilmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "dig-dug-dug", pron: "", uz: "kovlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "do-did-done", pron: "", uz: "qilmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "draw-drew-drawn", pron: "", uz: "chizmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "drink-drank-drunk", pron: "", uz: "ichmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "drive-drove-driven", pron: "", uz: "haydamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "eat-ate-eaten", pron: "", uz: "yemoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "fall-fell-fallen", pron: "", uz: "yiqilmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "feed-fed-fed", pron: "", uz: "boqmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "feel-felt-felt", pron: "", uz: "his qilmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "fight-fought-fought", pron: "", uz: "urushmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "find-found-found", pron: "", uz: "topmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "flee-fled-fled", pron: "", uz: "qochmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "fly-flew-flown", pron: "", uz: "uchmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "forbid-forbade-forbidden", pron: "", uz: "taqiqlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "forget-forgot-forgotten", pron: "", uz: "unutmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "forgive-forgave-forgiven", pron: "", uz: "kechirmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "freeze-froze-frozen", pron: "", uz: "muzlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "get-got-got", pron: "", uz: "olmoq, yetmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "give-gave-given", pron: "", uz: "bermoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
{ en: "go-went-gone", pron: "", uz: "ketmoq, bormoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "grow-grew-grown", pron: "", uz: "o‚Äòsmoq, o‚Äòstirmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "hang-hung-hung", pron: "", uz: "ilmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "hear-heard-heard", pron: "", uz: "eshitmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "hide-hid-hidden", pron: "", uz: "yashirmoq, berkitmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "hit-hit-hit", pron: "", uz: "urmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "hold-held-held", pron: "", uz: "ushlamoq, o‚Äòtkazmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "hurt-hurt-hurt", pron: "", uz: "jarohatlamoq, og‚Äòrimoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "keep-kept-kept", pron: "", uz: "saqlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "kneel-knelt-knelt", pron: "", uz: "tizzalamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "know-knew-known", pron: "", uz: "bilmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "lay-laid-laid", pron: "", uz: "qo‚Äòymoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "lead-led-led", pron: "", uz: "yetaklamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" }
,
{ en: "leave-left-left", pron: "", uz: "jo‚Äònab ketmoq, qoldirmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
{ en: "lend-lent-lent", pron: "", uz: "qarz bermoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "let-let-let", pron: "", uz: "ruxsat bermoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "lie-lay-lain", pron: "", uz: "yotmoq, aldammoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "light-lit-lit", pron: "", uz: "yoqmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "lose-lost-lost", pron: "", uz: "yo‚Äòqotmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "mean-meant-meant", pron: "", uz: "anglatmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "meet-met-met", pron: "", uz: "uchrashmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "pay-paid-paid", pron: "", uz: "to‚Äòlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "put-put-put", pron: "", uz: "qo‚Äòymoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },

{ en: "read-read-read", pron: "", uz: "o‚Äòqimoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
{ en: "ride-rode-ridden", pron: "/ra…™d-r…ô äd-Ààr…™dn/", uz: "minmoq (velosiped, ot)", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "ring-rang-rung", pron: "/r…™≈ã-r√¶≈ã-r å≈ã/", uz: "qo‚Äòng‚Äòiroq qilmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "rise-rose-risen", pron: "/ra…™z-r…ô äz-Ààr…™zn/", uz: "ko‚Äòtarilmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "run-ran-run", pron: "/r ån-r√¶n-r ån/", uz: "yugurmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "say-said-said", pron: "/se…™-sed-sed/", uz: "aytmoq, demoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "see-saw-seen", pron: "/siÀê-s…îÀê-siÀên/", uz: "ko‚Äòrmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "seek-sought-sought", pron: "/siÀêk-s…îÀêt-s…îÀêt/", uz: "qidirmoq, izlamoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "sell-sold-sold", pron: "/sel-s…ô äld-s…ô äld/", uz: "sotmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "send-sent-sent", pron: "/send-sent-sent/", uz: "jo‚Äònatmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "set-set-set", pron: "/set-set-set/", uz: "botmoq (quyosh), o‚Äòrnatmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "sew-sewed-sewn", pron: "/s…ô ä-sjuÀêd-s…ô än/", uz: "to‚Äòqimoq, tikmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "shake-shook-shaken", pron: "/ Ée…™k- É äk-Àà Ée…™k…ôn/", uz: "silkitmoq, titramoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "shine-shone-shone", pron: "/ Éa…™n- É…ín- É…ín/", uz: "nur sochmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "shoot-shot-shot", pron: "/ ÉuÀêt- É…ít- É…ít/", uz: "o‚Äòq otmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "show-showed-shown", pron: "/ É…ô ä- É…ô äd- É…ô än/", uz: "ko‚Äòrsatmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },
  { en: "shrink-shrank-shrunk", pron: "/ Ér…™≈ãk- Ér√¶≈ãk- Ér å≈ãk/", uz: "kichraymoq, (kiyim) kirishmoq", category: "Irregular Verbs (Noto‚Äòg‚Äòri fe‚Äôllar)" },



// proposition

{ en: "on", pron: "", uz: "ustida", category: "prepositions" },
{ en: "in", pron: "", uz: "ichida", category: "prepositions" },
{ en: "at", pron: "", uz: "da / joylashgan", category: "prepositions" },
{ en: "next to", pron: "", uz: "yonida", category: "prepositions" },
{ en: "near", pron: "", uz: "yaqinida", category: "prepositions" },
{ en: "under", pron: "", uz: "ostida", category: "prepositions" },
{ en: "opposite", pron: "", uz: "qarama-qarshi", category: "prepositions" },
{ en: "on the corner", pron: "", uz: "burchakda", category: "prepositions" },
{ en: "on the left", pron: "", uz: "chap tomonda", category: "prepositions" },
{ en: "on the right", pron: "", uz: "o‚Äòng tomonda", category: "prepositions" },
{ en: "through", pron: "", uz: "orqali, ichidan", category: "prepositions" },
{ en: "around", pron: "", uz: "atrofida", category: "prepositions" },
{ en: "onto", pron: "", uz: "ustiga", category: "prepositions" },
{ en: "into", pron: "", uz: "ichiga", category: "prepositions" },
{ en: "up", pron: "", uz: "yuqoriga", category: "prepositions" },
{ en: "out of", pron: "", uz: "ichidan tashqariga", category: "prepositions" },
{ en: "down", pron: "", uz: "pastga", category: "prepositions" },
{ en: "across", pron: "", uz: "kesib o‚Äòtib", category: "prepositions" },
{ en: "between", pron: "", uz: "orasida", category: "prepositions" },
{ en: "turn right", pron: "", uz: "o‚Äòngga buril", category: "prepositions" },
{ en: "turn left", pron: "", uz: "chapga buril", category: "prepositions" },
{ en: "go straight on", pron: "", uz: "to‚Äòg‚Äòri boring", category: "prepositions" },



      ];

      const categoryInfo = {
        all: { name: "All", icon: "fa-solid fa-globe" },
        favorites: { name: "‚≠ê Favorites", icon: "fa-solid fa-star" },
        adverbs: { name: "Adverbs", icon: "fa-solid fa-a" },
        "daily routine": { name: "Daily Routine", icon: "fa-solid fa-calendar-day" },
      };

      /* =========================
         STATE
      ========================== */
      const LS_THEME = "el_theme_v1";
      const LS_VOICE = "el_voice_v1";
      const LS_FAVS = "el_favorites_v1";

      let appSettings = {
        theme: "dark",
        voice: "female",
        memorizationCategory: "all",
        quizCategory: "all",
        speakingCategory: "all",
        nextScreen: null,
        search: "",
      };

      let favorites = new Set(loadFavorites());

      let currentWord = null;
      let quizScore = 0;
      let quizTotal = 0;

      let recognition = null;
      let isListening = false;

      /* =========================
         HELPERS
      ========================== */
      function escapeHTML(str) {
        return String(str)
          .replaceAll("&", "&amp;")
          .replaceAll("<", "&lt;")
          .replaceAll(">", "&gt;")
          .replaceAll('"', "&quot;")
          .replaceAll("'", "&#039;");
      }
      function escapeQuotes(str) {
        return String(str).replaceAll("\\", "\\\\").replaceAll("'", "\\'");
      }
      function escapeRegExp(s) {
        return s.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      }
      function highlightText(escapedHtml, q) {
        if (!q) return escapedHtml;
        const re = new RegExp(`(${escapeRegExp(q)})`, "ig");
        return escapedHtml.replace(re, `<mark class="hl bg-yellow-200 text-neutral-900 dark:bg-yellow-300">$1</mark>`);
      }
      function wordId(w) {
        return `${w.en}|||${w.category}`.toLowerCase();
      }

      /* =========================
         THEME (saved)
      ========================== */
      function applyTheme() {
        document.documentElement.classList.toggle("dark", appSettings.theme === "dark");
        localStorage.setItem(LS_THEME, appSettings.theme);
      }
      function setTheme(theme) {
        appSettings.theme = theme;
        applyTheme();
      }
      function toggleTheme() {
        setTheme(appSettings.theme === "dark" ? "light" : "dark");
      }

      /* =========================
         FAVORITES (saved)
      ========================== */
      function loadFavorites() {
        try {
          return JSON.parse(localStorage.getItem(LS_FAVS) || "[]");
        } catch {
          return [];
        }
      }
      function saveFavorites() {
        localStorage.setItem(LS_FAVS, JSON.stringify([...favorites]));
      }
      function toggleFavorite(id) {
        if (favorites.has(id)) favorites.delete(id);
        else favorites.add(id);
        saveFavorites();
        loadWords();
      }
      function clearFavorites() {
        favorites = new Set();
        saveFavorites();
        alert("Favorites cleared ‚úÖ");
        loadWords();
      }
      function exportFavorites() {
        const favWords = words.filter((w) => favorites.has(wordId(w)));
        const text = favWords.map((w) => `${w.en} ‚Äî ${w.uz}  /${w.pron}/  [${w.category}]`).join("\n");
        if (!text.trim()) {
          alert("No favorites yet ‚≠ê");
          return;
        }
        // Copy to clipboard if possible
        if (navigator.clipboard?.writeText) {
          navigator.clipboard.writeText(text).then(() => alert("Copied to clipboard ‚úÖ"));
        } else {
          // fallback
          prompt("Copy favorites:", text);
        }
      }

      /* =========================
         NAVIGATION
      ========================== */
      function showScreen(screenId) {
        document.querySelectorAll(".screen, .category-selection").forEach((s) => s.classList.remove("active"));
        const el = document.getElementById(screenId);
        if (el) el.classList.add("active");

        if (screenId === "memorize") loadWords();
        if (screenId === "quiz") {
          resetQuiz();
          nextQuestion();
        }
        if (screenId === "speaking") nextSpeakingWord();
      }

      function showCategorySelection(nextScreen) {
        appSettings.nextScreen = nextScreen;

        const title = document.getElementById("categoryTitle");
        title.textContent =
          nextScreen === "memorize" ? "Select Category ‚Äî Memorize"
          : nextScreen === "quiz" ? "Select Category ‚Äî Quiz"
          : "Select Category ‚Äî Speaking";

        const categories = ["all", ...new Set(words.map((w) => w.category))];

        const grid = document.getElementById("categoryGrid");
        grid.innerHTML = categories
          .map((cat) => {
            const meta = categoryInfo[cat] || { name: cat, icon: "fa-solid fa-folder" };
            return `
              <button
                class="tap rounded-2xl border border-neutral-200 bg-white p-4 text-left shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-[0.99] dark:border-white/10 dark:bg-neutral-900"
                onclick="selectCategory('${escapeQuotes(cat)}')"
              >
                <div class="mb-2 flex h-11 w-11 items-center justify-center rounded-2xl border border-neutral-200 bg-neutral-50 text-neutral-900 dark:border-white/10 dark:bg-white/5 dark:text-white">
                  <i class="${meta.icon}"></i>
                </div>
                <div class="text-sm font-extrabold tracking-tight">${escapeHTML(meta.name)}</div>
                <div class="text-xs text-neutral-500 dark:text-white/60">Tap to choose</div>
              </button>
            `;
          })
          .join("");

        showScreen("categorySelection");
      }

      function selectCategory(category) {
        if (appSettings.nextScreen === "memorize") {
          appSettings.memorizationCategory = category;
          appSettings.search = "";
          const si = document.getElementById("searchInput");
          if (si) si.value = "";
          showScreen("memorize");
        } else if (appSettings.nextScreen === "quiz") {
          appSettings.quizCategory = category;
          showScreen("quiz");
        } else if (appSettings.nextScreen === "speaking") {
          appSettings.speakingCategory = category;
          showScreen("speaking");
        }
      }

      /* =========================
         SEARCH
      ========================== */
      function onSearchChange(val) {
        appSettings.search = (val || "").trim().toLowerCase();
        loadWords();
      }
      function clearSearch() {
        appSettings.search = "";
        const si = document.getElementById("searchInput");
        if (si) si.value = "";
        loadWords();
      }

      /* =========================
         VOICE (saved)
      ========================== */
      function speakWord(text) {
        speechSynthesis.cancel();
        setTimeout(() => {
          const u = new SpeechSynthesisUtterance(text);
          u.lang = "en-US";

          switch (appSettings.voice) {
            case "male":
              u.rate = 0.9;
              u.pitch = 0.7;
              break;
            case "child":
              u.rate = 0.8;
              u.pitch = 1.5;
              break;
            case "slow":
              u.rate = 0.6;
              u.pitch = 1.0;
              break;
            default:
              u.rate = 0.9;
              u.pitch = 1.2;
          }

          u.volume = 1.0;
          speechSynthesis.speak(u);
        }, 60);
      }

      function setVoice(voice) {
        appSettings.voice = voice;
        localStorage.setItem(LS_VOICE, voice);
        renderVoiceButtons();
      }

      function renderVoiceButtons() {
        const voices = [
          { key: "female", label: "Female" },
          { key: "male", label: "Male" },
          { key: "child", label: "Child" },
          { key: "slow", label: "Slow" },
        ];

        const makeBtn = (v) => {
          const active = appSettings.voice === v.key;
          const cls =
            "rounded-full border px-3 py-2 text-xs font-extrabold transition active:scale-95 " +
            (active
              ? "border-neutral-900 bg-neutral-900 text-white dark:border-white dark:bg-white dark:text-neutral-900"
              : "border-neutral-200 bg-white text-neutral-900 dark:border-white/10 dark:bg-neutral-900 dark:text-white");
          return `<button class="${cls}" onclick="setVoice('${v.key}')">${v.label}</button>`;
        };

        const html = voices.map(makeBtn).join("");
        const a = document.getElementById("voiceButtonsMemorize");
        const b = document.getElementById("voiceButtonsSettings");
        if (a) a.innerHTML = html;
        if (b) b.innerHTML = html;
      }

      /* =========================
         MEMORIZE (list)
      ========================== */
      function loadWords() {
        const wordList = document.getElementById("wordList");
        const wordCounter = document.getElementById("wordCounter");
        const categoryFilter = document.getElementById("categoryFilter");

        // chips (include favorites)
        const categories = ["all", "favorites", ...new Set(words.map((w) => w.category))];
        categoryFilter.innerHTML = categories
          .map((cat) => {
            const active = cat === appSettings.memorizationCategory;
            const label = categoryInfo[cat]?.name || cat;
            const base = "whitespace-nowrap rounded-full border px-3 py-2 text-xs font-extrabold transition active:scale-95";
            const activeCls = "border-neutral-900 bg-neutral-900 text-white dark:border-white dark:bg-white dark:text-neutral-900";
            const idleCls = "border-neutral-200 bg-white text-neutral-900 dark:border-white/10 dark:bg-neutral-900 dark:text-white";
            return `<button class="${base} ${active ? activeCls : idleCls}" onclick="filterMemorization('${escapeQuotes(cat)}')">${escapeHTML(label)}</button>`;
          })
          .join("");

        // filter by category
        let list = words;
        if (appSettings.memorizationCategory === "favorites") {
          list = words.filter((w) => favorites.has(wordId(w)));
        } else if (appSettings.memorizationCategory !== "all") {
          list = words.filter((w) => w.category === appSettings.memorizationCategory);
        }

        // search filter
        const q = appSettings.search;
        if (q) {
          list = list.filter(
            (w) =>
              w.en.toLowerCase().includes(q) ||
              w.uz.toLowerCase().includes(q) ||
              (w.pron || "").toLowerCase().includes(q)
          );
        }

        wordCounter.innerHTML = `
          <span class="h-2 w-2 rounded-full bg-neutral-900 dark:bg-white"></span>
          <span><b class="text-neutral-900 dark:text-white">${list.length}</b> words</span>
        `;

        if (!list.length) {
          wordList.innerHTML = `
            <div class="rounded-2xl border border-neutral-200 bg-white p-4 text-sm font-extrabold text-neutral-700 dark:border-white/10 dark:bg-neutral-900 dark:text-white/80">
              No words found.
            </div>
          `;
          return;
        }

        wordList.innerHTML = list
          .map((w) => {
            const id = wordId(w);
            const fav = favorites.has(id);

            const enEsc = escapeHTML(w.en);
            const uzEsc = escapeHTML(w.uz);
            const prEsc = escapeHTML(w.pron || "");

            return `
              <div class="rounded-2xl border border-neutral-200 bg-white p-4 shadow-[0_12px_36px_rgba(0,0,0,.10)] dark:border-white/10 dark:bg-neutral-900">
                <div class="flex items-start justify-between gap-3">
                  <div class="min-w-0">
                    <div class="text-lg font-extrabold tracking-tight">${highlightText(enEsc, q)}</div>
                    <div class="mt-1 text-sm text-neutral-600 dark:text-white/70">${highlightText(uzEsc, q)}</div>
                    <div class="mt-2 inline-flex rounded-full border border-neutral-200 bg-neutral-50 px-3 py-1 text-xs font-bold text-neutral-700 dark:border-white/10 dark:bg-white/5 dark:text-white/70">
                      /${highlightText(prEsc, q)}/
                    </div>
                    <div class="mt-2 text-[11px] font-bold text-neutral-500 dark:text-white/50">
                      Category: ${escapeHTML(w.category)}
                    </div>
                  </div>

                  <div class="flex flex-col gap-2">
                    <button
                      class="inline-flex h-11 w-11 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
                      onclick="speakWord('${escapeQuotes(w.en)}')"
                      aria-label="Speak"
                      title="Speak"
                    >
                      <i class="fa-solid fa-volume-high"></i>
                    </button>

                    <button
                      class="inline-flex h-11 w-11 items-center justify-center rounded-2xl border border-neutral-200 bg-white text-neutral-900 shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-95 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
                      onclick="toggleFavorite('${escapeQuotes(id)}')"
                      aria-label="Favorite"
                      title="Favorite"
                    >
                      <i class="fa-${fav ? "solid" : "regular"} fa-star ${fav ? "text-yellow-500" : ""}"></i>
                    </button>
                  </div>
                </div>
              </div>
            `;
          })
          .join("");
      }

      function filterMemorization(category) {
        appSettings.memorizationCategory = category;
        loadWords();
      }

      /* =========================
         QUIZ
      ========================== */
      function resetQuiz() {
        quizScore = 0;
        quizTotal = 0;
        document.getElementById("scoreValue").textContent = "0";
        document.getElementById("totalValue").textContent = "0";
        document.getElementById("quizProgress").style.width = "0%";
        document.getElementById("feedback").textContent = "";
        document.getElementById("feedback").classList.remove("text-green-600", "text-red-600");
        document.getElementById("nextButton").style.display = "block";
      }

      function nextQuestion() {
        const nextBtn = document.getElementById("nextButton");
        nextBtn.style.display = "none";

        const feedback = document.getElementById("feedback");
        feedback.textContent = "";
        feedback.classList.remove("text-green-600", "text-red-600");

        const isEnglishToUzbek = Math.random() < 0.5;

        const pool =
          appSettings.quizCategory === "all"
            ? words
            : words.filter((w) => w.category === appSettings.quizCategory);

        if (!pool.length) {
          document.getElementById("questionText").textContent = "No words in this category";
          document.getElementById("optionsContainer").innerHTML = "";
          nextBtn.style.display = "block";
          return;
        }

        const correctWord = pool[Math.floor(Math.random() * pool.length)];
        document.getElementById("questionText").textContent = isEnglishToUzbek ? correctWord.en : correctWord.uz;

        let options = [correctWord];
        while (options.length < 4) {
          const r = pool[Math.floor(Math.random() * pool.length)];
          if (!options.some((o) => o.en === r.en)) options.push(r);
        }
        options.sort(() => Math.random() - 0.5);

        document.getElementById("optionsContainer").innerHTML = options
          .map((opt) => {
            return `
              <button
                class="opt-btn w-full rounded-2xl border border-neutral-200 bg-white px-4 py-4 text-left text-sm font-extrabold text-neutral-900 shadow-[0_12px_36px_rgba(0,0,0,.10)] transition active:scale-[0.99]
                       disabled:opacity-60 disabled:active:scale-100 dark:border-white/10 dark:bg-neutral-900 dark:text-white"
                onclick="selectAnswer(this, '${escapeQuotes(opt.en)}', '${escapeQuotes(correctWord.en)}', ${isEnglishToUzbek})"
              >
                ${isEnglishToUzbek ? escapeHTML(opt.uz) : escapeHTML(opt.en)}
              </button>
            `;
          })
          .join("");

        document.getElementById("quizProgress").style.width = `${Math.min(100, (quizTotal / 10) * 100)}%`;
      }

      function selectAnswer(el, selectedEn, correctEn, isEnglishToUzbek) {
        quizTotal++;
        document.getElementById("totalValue").textContent = quizTotal;

        const feedback = document.getElementById("feedback");

        if (selectedEn === correctEn) {
          quizScore++;
          document.getElementById("scoreValue").textContent = quizScore;
          el.classList.add("border-green-500");
          feedback.textContent = "‚úÖ Correct!";
          feedback.classList.add("text-green-600");
          speakWord(correctEn);
        } else {
          el.classList.add("border-red-500");

          const correctTranslation = isEnglishToUzbek
            ? (words.find((w) => w.en === correctEn)?.uz || correctEn)
            : correctEn;

          feedback.textContent = `‚ùå Correct: ${correctTranslation}`;
          feedback.classList.add("text-red-600");

          // mark correct option
          document.querySelectorAll(".opt-btn").forEach((btn) => {
            const t = btn.textContent.trim();
            if (t === correctTranslation) btn.classList.add("border-green-500");
          });
        }

        document.querySelectorAll(".opt-btn").forEach((btn) => (btn.disabled = true));
        document.getElementById("nextButton").style.display = "block";
        document.getElementById("quizProgress").style.width = `${Math.min(100, (quizTotal / 10) * 100)}%`;
      }

      /* =========================
         SPEAKING
      ========================== */
      function giveHint() {
        if (currentWord) speakWord(currentWord.en);
      }

      function nextSpeakingWord() {
        const pool =
          appSettings.speakingCategory === "all"
            ? words
            : words.filter((w) => w.category === appSettings.speakingCategory);

        const uzEl = document.getElementById("uzWord");
        const resEl = document.getElementById("speakingResult");
        const mic = document.getElementById("micButton");
        const nextBtn = document.getElementById("nextWordButton");

        if (!pool.length) {
          uzEl.textContent = "No words in this category";
          resEl.textContent = "";
          nextBtn.classList.add("hidden");
          return;
        }

        currentWord = pool[Math.floor(Math.random() * pool.length)];
        uzEl.textContent = currentWord.uz;

        resEl.textContent = "Tap microphone and say the word";
        resEl.classList.remove("text-green-600", "text-red-600");

        nextBtn.classList.add("hidden");
        mic.classList.remove("ring-4", "ring-neutral-300", "dark:ring-white/20");

        if (recognition) {
          try { recognition.stop(); } catch (e) {}
        }
        isListening = false;
      }

      document.getElementById("micButton").addEventListener("click", () => {
        if (isListening) {
          stopListening();
          return;
        }
        startListening();
      });

      function startListening() {
        const SR = window.SpeechRecognition || window.webkitSpeechRecognition;
        if (!SR) {
          alert("Speech recognition is not supported. Use Chrome/Edge.");
          return;
        }

        recognition = new SR();
        recognition.lang = "en-US";
        recognition.continuous = false;
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;

        const mic = document.getElementById("micButton");
        const resEl = document.getElementById("speakingResult");

        recognition.onstart = () => {
          isListening = true;
          mic.classList.add("ring-4", "ring-neutral-300", "dark:ring-white/20");
          resEl.textContent = "Listening... Speak now";
          resEl.classList.remove("text-green-600", "text-red-600");
        };

        recognition.onresult = (event) => {
          const spoken = event.results[0][0].transcript.trim().toLowerCase();
          const correct = (currentWord?.en || "").toLowerCase();

          let ok = false;
          if (spoken === correct) ok = true;
          else if (levenshteinDistance(spoken, correct) <= 2) ok = true;
          else {
            const s = spoken.split(/\s+/);
            const c = correct.split(/\s+/);
            if (s.length === c.length) {
              let match = 0;
              for (let i = 0; i < s.length; i++) {
                if (levenshteinDistance(s[i], c[i]) <= 1) match++;
              }
              ok = match / c.length >= 0.8;
            }
          }

          if (ok) {
            resEl.textContent = "‚úÖ Perfect! Correct pronunciation!";
            resEl.classList.add("text-green-600");
            speakWord("Excellent!");

            setTimeout(() => nextSpeakingWord(), 1200);
          } else {
            resEl.textContent = `‚ùå Try again. You said: "${spoken}"`;
            resEl.classList.add("text-red-600");

            setTimeout(() => {
              resEl.textContent = "Try again. Tap microphone";
              stopListening();
            }, 1400);
          }
        };

        recognition.onerror = (event) => {
          const resEl = document.getElementById("speakingResult");
          resEl.classList.add("text-red-600");

          if (event.error === "no-speech") resEl.textContent = "No speech detected. Try again.";
          else if (event.error === "audio-capture") resEl.textContent = "No microphone found.";
          else if (event.error === "not-allowed") resEl.textContent = "Microphone permission denied.";
          else resEl.textContent = "Error occurred. Try again.";

          stopListening();
        };

        recognition.onend = () => stopListening();

        try {
          recognition.start();
        } catch (e) {
          document.getElementById("speakingResult").textContent = "Error starting recognition";
          stopListening();
        }
      }

      function stopListening() {
        if (recognition) {
          try { recognition.stop(); } catch (e) {}
        }
        isListening = false;
        document.getElementById("micButton").classList.remove("ring-4", "ring-neutral-300", "dark:ring-white/20");
      }

      function levenshteinDistance(a, b) {
        if (a.length === 0) return b.length;
        if (b.length === 0) return a.length;
        const matrix = [];
        for (let i = 0; i <= b.length; i++) matrix[i] = [i];
        for (let j = 0; j <= a.length; j++) matrix[0][j] = j;
        for (let i = 1; i <= b.length; i++) {
          for (let j = 1; j <= a.length; j++) {
            if (b.charAt(i - 1) === a.charAt(j - 1)) matrix[i][j] = matrix[i - 1][j - 1];
            else matrix[i][j] = Math.min(
              matrix[i - 1][j - 1] + 1,
              matrix[i][j - 1] + 1,
              matrix[i - 1][j] + 1
            );
          }
        }
        return matrix[b.length][a.length];
      }

      /* =========================
         INIT
      ========================== */
      window.onload = () => {
        // load theme/voice
        const savedTheme = localStorage.getItem(LS_THEME);
        const savedVoice = localStorage.getItem(LS_VOICE);

        if (savedTheme === "light" || savedTheme === "dark") appSettings.theme = savedTheme;
        if (savedVoice) appSettings.voice = savedVoice;

        applyTheme();
        renderVoiceButtons();
      };
    </script>
  </body>
</html>
